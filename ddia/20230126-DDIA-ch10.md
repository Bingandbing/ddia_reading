- Name:    Li Binfeng
- Topic:   批处理系统
- Time：   2023-01-26
# Context
这章的脉络主要是先介绍了批处理系统的定义，并根据其特征分别介绍了单机和分布式下的批处理系统。单机下以UNIX系统工具举例，分布式下以MapReduce作业执行举例。  
由于批处理的吞吐量是主要的指标，所以可扩展性成为重点，当纵向扩展（提升硬件性能）成为极限的时候横向扩展（分布式）变得更加重要。这也是为什么这章花了大量笔墨用于描述分布式下的批处理。  
分布式下的批处理引擎的重点是分区和容错。
# Definition
系统可以大致分成三种，分别是：在线系统、批处理系统（离线系统）、流处理系统（近实时系统）。  
- 在线系统主要的衡量指标是响应时间，可用性也同样重要；  
- 批处理系统的主要衡量指标则以吞吐量为主，因为批处理系统通常会接收相对大的数据量，执行一般需要比较长的时间；  
- 流处理系统介于在线系统和批处理系统之间，即事件发生以后不久即可对事件进行处理。  

# 用UNIX工具进行批处理（单机）
主要介绍如何用UNIX自带的工具进行批处理，主要是管道，awk，sort。uniq等工具。后续会扩展到UNIX设计哲学，主要讲的是
- 每个程序做好一件事情
- 定义标准的输入和输出流，其中介绍了以stdio为基础的计语ascii码的文件输入输出流
- 今早设计和构建系统，及时重构，这个概念也可以用在现在的工程上面
- 优先使用工具来减轻编程任务

stdio可以定义输入输出流程，对于unix一台机器的情况下对一个批处理有标准的输入输出即可。

# MapReduce与分布式文件系统（分布式）
这边主要扩展上述用单机处理的场景，在一台机子的情况下可以用unix里面的工具，而横向扩展到分布式场景下则需要一些别的手段。这边MapReduce和上述UNIX处理工具的区别在于：  
UNIX批处理工具：一个输入流  一个输出流  
MapReduce作业：一个或者多个输出流  一个或多个输出流  
分布式批处理框架需要解决的两个主要问题为：分区和容错

## MapReduce作业执行

## MapReduce分布式执行

## MapReduce工作流

## Reduce段的join与分组
讨论了几种join的场景与group by的场景

# 批处理输出

# 对比hadoop和分布式数据库  

# 超越MapReduce
MapReduce仅仅只是一个学习工具，用来熟悉场景。这边介绍了MapReduce的一些问题并提出对应的解决措施  
有一些改进的方式：例如中间过程实体化，即产生物化视图  

## 数据流引擎
为了解决MapReduce的这些问题（指的是哪些？），将运算符单独定义出来，这边有点类似与执行计划里面的算子。  

## 数据流引擎带来的好处：容错变强了

# 图与迭代处理（扩展话题）
## 图处理下的容错和并行执行讨论
在批处理环境中查看图的方式更倾向于机器学习